{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\nvar lodash_isequal_1 = __importDefault(require(\"lodash.isequal\"));\nvar AttributeMap;\n(function (AttributeMap) {\n  function compose(a, b, keepNull) {\n    if (a === void 0) {\n      a = {};\n    }\n    if (b === void 0) {\n      b = {};\n    }\n    if (typeof a !== 'object') {\n      a = {};\n    }\n    if (typeof b !== 'object') {\n      b = {};\n    }\n    var attributes = lodash_clonedeep_1.default(b);\n    if (!keepNull) {\n      attributes = Object.keys(attributes).reduce(function (copy, key) {\n        if (attributes[key] != null) {\n          copy[key] = attributes[key];\n        }\n        return copy;\n      }, {});\n    }\n    for (var key in a) {\n      if (a[key] !== undefined && b[key] === undefined) {\n        attributes[key] = a[key];\n      }\n    }\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n  AttributeMap.compose = compose;\n  function diff(a, b) {\n    if (a === void 0) {\n      a = {};\n    }\n    if (b === void 0) {\n      b = {};\n    }\n    if (typeof a !== 'object') {\n      a = {};\n    }\n    if (typeof b !== 'object') {\n      b = {};\n    }\n    var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attrs, key) {\n      if (!lodash_isequal_1.default(a[key], b[key])) {\n        attrs[key] = b[key] === undefined ? null : b[key];\n      }\n      return attrs;\n    }, {});\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n  AttributeMap.diff = diff;\n  function invert(attr, base) {\n    if (attr === void 0) {\n      attr = {};\n    }\n    if (base === void 0) {\n      base = {};\n    }\n    attr = attr || {};\n    var baseInverted = Object.keys(base).reduce(function (memo, key) {\n      if (base[key] !== attr[key] && attr[key] !== undefined) {\n        memo[key] = base[key];\n      }\n      return memo;\n    }, {});\n    return Object.keys(attr).reduce(function (memo, key) {\n      if (attr[key] !== base[key] && base[key] === undefined) {\n        memo[key] = null;\n      }\n      return memo;\n    }, baseInverted);\n  }\n  AttributeMap.invert = invert;\n  function transform(a, b, priority) {\n    if (priority === void 0) {\n      priority = false;\n    }\n    if (typeof a !== 'object') {\n      return b;\n    }\n    if (typeof b !== 'object') {\n      return undefined;\n    }\n    if (!priority) {\n      return b; // b simply overwrites us without priority\n    }\n    var attributes = Object.keys(b).reduce(function (attrs, key) {\n      if (a[key] === undefined) {\n        attrs[key] = b[key]; // null is a valid value\n      }\n      return attrs;\n    }, {});\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n  AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;","map":{"version":3,"names":["lodash_clonedeep_1","__importDefault","require","lodash_isequal_1","AttributeMap","compose","a","b","keepNull","attributes","default","Object","keys","reduce","copy","key","undefined","length","diff","concat","attrs","invert","attr","base","baseInverted","memo","transform","priority","exports"],"sources":["../src/AttributeMap.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}