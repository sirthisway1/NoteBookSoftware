{"ast":null,"code":"import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, toHandlers as _toHandlers, mergeProps as _mergeProps, createVNode as _createVNode, Transition as _Transition, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = [\"colspan\"];\nconst _hoisted_2 = {\n  class: \"card\"\n};\nconst _hoisted_3 = {\n  class: \"title\"\n};\nconst _hoisted_4 = [\"readonly\"];\nconst _hoisted_5 = {\n  class: \"body\"\n};\nconst _hoisted_6 = [\"readonly\"];\nconst _hoisted_7 = {\n  class: \"footer\"\n};\nconst _hoisted_8 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_TreeChart = _resolveComponent(\"TreeChart\");\n  return _openBlock(), _createElementBlock(\"table\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"td\", {\n    colspan: $options.hasChild ? $props.model.children.length * 2 : 1,\n    class: _normalizeClass({\n      extend: $options.hasChild && $props.model.extend\n    })\n  }, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $props.model.resName = $event),\n    readonly: !$data.isEditing,\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.updateContent && $options.updateContent(...args)),\n    class: \"name-input\"\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_4), [[_vModelText, $props.model.resName]])]), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $props.model.message = $event),\n    readonly: !$data.isEditing,\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.updateContent && $options.updateContent(...args)),\n    class: \"content-textarea\"\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_6), [[_vModelText, $props.model.message]])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", {\n    onClick: _cache[4] || (_cache[4] = $event => _ctx.$emit('on-add', $props.model)),\n    class: \"btn\"\n  }, \"添加\"), _createElementVNode(\"div\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.toggleEdit && $options.toggleEdit(...args)),\n    class: \"btn\"\n  }, _toDisplayString($data.isEditing ? '保存' : '修改'), 1 /* TEXT */), _createElementVNode(\"div\", {\n    onClick: _cache[6] || (_cache[6] = $event => _ctx.$emit('on-remove', $props.model)),\n    class: \"btn\"\n  }, \"删除\")])]), $options.hasChild ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"extend_handle\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.toggleExtend && $options.toggleExtend(...args))\n  }, _toDisplayString($props.model.extend ? '隐藏' : '展开'), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 10 /* CLASS, PROPS */, _hoisted_1)]), $options.hasChild && $props.model.extend ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.model.children, (item, index) => {\n    return _openBlock(), _createElementBlock(\"td\", {\n      key: index,\n      colspan: \"2\",\n      class: \"child\"\n    }, [_createCommentVNode(\"跨层级监听事件 v-on=\\\"$listeners\\\"（.native原生事件无效） \"), _createVNode(_Transition, {\n      name: \"fade\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_TreeChart, _mergeProps({\n        model: item\n      }, _toHandlers(_ctx.$attrs), {\n        onOnAdd: _cache[8] || (_cache[8] = $event => _ctx.$emit('on-add', $event)),\n        onOnUpdate: _cache[9] || (_cache[9] = $event => _ctx.$emit('on-update', $event)),\n        onOnRemove: _cache[10] || (_cache[10] = $event => _ctx.$emit('on-remove', $event))\n      }), null, 16 /* FULL_PROPS */, [\"model\"])]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_createElementVNode","colspan","$options","hasChild","$props","model","children","length","_normalizeClass","extend","_hoisted_2","_hoisted_3","_cache","$event","resName","readonly","$data","isEditing","onChange","args","updateContent","_hoisted_4","_hoisted_5","message","_hoisted_6","_hoisted_7","onClick","_ctx","$emit","toggleEdit","toggleExtend","_createCommentVNode","_hoisted_1","_hoisted_8","_Fragment","_renderList","item","index","_createVNode","_Transition","name","default","_withCtx","_component_TreeChart","_mergeProps","_toHandlers","$attrs","onOnAdd","onOnUpdate","onOnRemove","_"],"sources":["D:\\VUEitem\\front\\src\\components\\TreeNode.vue"],"sourcesContent":["<template>\r\n    <table>\r\n      <tr>\r\n        <td\r\n          :colspan=\"hasChild ? model.children.length * 2 : 1\"\r\n          :class=\"{ extend: hasChild && model.extend }\"\r\n        >\r\n          <div class=\"card\">\r\n            <div class=\"title\">\r\n              <input v-model=\"model.resName\" :readonly=\"!isEditing\" @change=\"updateContent\" class=\"name-input\">\r\n            </div>\r\n            <div class=\"body\">\r\n              <textarea v-model=\"model.message\" :readonly=\"!isEditing\" @change=\"updateContent\" class=\"content-textarea\"></textarea>\r\n            </div>\r\n            <div class=\"footer\">\r\n              <div @click=\"$emit('on-add', model)\" class=\"btn\">添加</div>\r\n              <div @click=\"toggleEdit\" class=\"btn\">{{ isEditing ? '保存' : '修改' }}</div>\r\n              <div @click=\"$emit('on-remove', model)\" class=\"btn\">删除</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"extend_handle\" v-if=\"hasChild\" @click=\"toggleExtend\">{{ model.extend ? '隐藏' : '展开' }}</div>\r\n        </td>\r\n      </tr>\r\n      \r\n      <tr v-if=\"hasChild && model.extend\">\r\n        <td\r\n          v-for=\"(item, index) in model.children\"\r\n          :key=\"index\"\r\n          colspan=\"2\"\r\n          class=\"child\"\r\n        >\r\n          <!--跨层级监听事件 v-on=\"$listeners\"（.native原生事件无效） -->\r\n          <transition name=\"fade\">\r\n            <TreeChart :model=\"item\"\r\n                v-on=\"$attrs\"\r\n                @on-add=\"$emit('on-add', $event)\"\r\n                @on-update=\"$emit('on-update', $event)\"\r\n                @on-remove=\"$emit('on-remove', $event)\"\r\n            />\r\n        </transition>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n  </template>\r\n  \r\n  <script>\r\n  import { readonly } from 'vue';\r\n  \r\n  export default {\r\n    name: 'TreeChart',\r\n    props: ['model'],\r\n    data() {\r\n      return {\r\n        isEditing: false\r\n      }\r\n    },\r\n    computed: {\r\n      hasChild () {\r\n        return this.model.children && this.model.children.length\r\n      }\r\n    },\r\n    methods: {\r\n      toggleExtend () {\r\n        this.model.extend = !this.model.extend\r\n      },\r\n      toggleEdit() {\r\n        this.isEditing = !this.isEditing\r\n        if (!this.isEditing) {\r\n         // 保存修改\r\n         this.$emit('on-update', this.model)\r\n        }\r\n      },\r\n      updateContent() {\r\n        if (this.isEditing) {\r\n            this.$emit('on-update', this.model)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style lang=\"scss\">\r\n  .card {\r\n    background: #74f5c3;\r\n    border: 2px solid #ffffff;\r\n    border-radius: 10px;\r\n    margin: 0 auto;\r\n    width: 200px;\r\n    transition: box-shadow 0.5s, transform 0.3s; // 添加 transform 过渡效果\r\n    box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1); // 添加默认阴影\r\n    &:hover {\r\n      box-shadow: 0px 20px 20px rgba(0, 0, 0, 0.15); // 增强悬停时的阴影效果\r\n      transform: translateY(-5px); // 添加轻微的上移效果\r\n    }\r\n  \r\n    .title {\r\n      padding: 10px 0;\r\n      font-size: 12px;\r\n  \r\n      .name-input {\r\n            width: 90%;\r\n            text-align: center;\r\n            border: none;\r\n            outline: none;\r\n            background: transparent;\r\n            font-size: 14px;\r\n            font-weight: bold;\r\n            color: #333;\r\n            padding: 5px;\r\n            box-sizing: border-box;\r\n        }\r\n    }\r\n  \r\n    .body {\r\n      height: 100px;\r\n      background: #ffffff;\r\n      width: auto;\r\n      margin: 0 15px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      border-radius: 5px; // 添加圆角，使选中效果更美观\r\n  \r\n      .content-textarea {\r\n            width: 100%;\r\n            height: 90px;\r\n            resize: none;\r\n            border: none;\r\n            outline: none;\r\n            background: transparent;\r\n            font-size: 12px;\r\n            text-align: left;\r\n            padding-top: 5px;\r\n            padding-left: 10px;\r\n            box-sizing: border-box;\r\n            transition: background-color 0.3s, box-shadow 0.3s; // 添加过渡效果\r\n  \r\n            &:focus {\r\n        background-color: rgba(116, 245, 195, 0.1); // 轻微的背景色变化\r\n        box-shadow: 0 0 0 2px rgba(116, 245, 195, 0.5); // 添加聚焦时的轮廓效果\r\n      }\r\n  \r\n      &:not(:disabled) {\r\n        cursor: text; // 当不禁用时，显示文本光标\r\n      }\r\n  \r\n      &:disabled {\r\n        cursor: default; // 当禁用时，显示默认光标\r\n        opacity: 0.7; // 轻微降低不可编辑时的透明度\r\n      }\r\n        }\r\n  \r\n        \r\n    }\r\n  \r\n    .footer {\r\n      display: flex;\r\n      margin: 5px 15px;\r\n      justify-content: space-between;\r\n      .btn {\r\n        font-size: 12px;\r\n        color: #000;\r\n        cursor: pointer;\r\n        padding: 2px 6px;\r\n        border-radius: 4px;\r\n        transition: background 0.3s, color 0.3s;\r\n        &:hover {\r\n          background: #4d6d5d;\r\n          color: #f6f6f6;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .extend_handle {\r\n    cursor: pointer;\r\n    &:hover {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n  table {\r\n    border-collapse: separate !important;\r\n    border-spacing:  0 !important;\r\n    margin: 0 auto;\r\n  \r\n    td {\r\n      position: relative;\r\n      vertical-align: top;\r\n      padding: 0 0 70px 0;\r\n      text-align: center;\r\n      transition: all 0.3s;\r\n      &.extend {   //父节点向下的线\r\n        &::after {\r\n          content: '';\r\n          position: absolute;\r\n          left: 50%; //节点中心\r\n          bottom: 35px; //距离底部\r\n          height: 35px; //高度\r\n          border-left: 2px solid rgb(159, 186, 202);  //绘制实线\r\n          transform: translate3d(-0.7px, 0, 0); //微调\r\n        }\r\n      }\r\n      &.child {   //除两边节点外的其他节点上方线\r\n        &::before {\r\n          content: '';\r\n          position: absolute;\r\n          left: 50%;\r\n          bottom: 100%;\r\n          height: 35px;\r\n          border-left: 2px solid rgb(159, 186, 202);\r\n          transform: translate3d(-1px, 0, 0);\r\n        }\r\n        &::after {  //横线\r\n          content: '';\r\n          position: absolute;\r\n          left: 0;\r\n          right: 0;\r\n          top: -35px;\r\n          border-top: 2px solid rgb(159, 186, 202);\r\n        }\r\n        &:first-child:before,\r\n        &:last-child:before {\r\n          display: none;\r\n        }\r\n        &:first-child:after {  //最左边节点向右延伸的线\r\n          left: 50%;\r\n          height: 35px;\r\n          border: 2px solid;\r\n          border-color: rgb(159, 186, 202) transparent transparent rgb(159, 186, 202);\r\n          border-radius: 6px 0 0 0;\r\n          transform: translate3d(1px, 0, 0);\r\n        }\r\n        &:last-child:after {  //最右边向左边延伸的线\r\n          right: 50%;\r\n          height: 35px;\r\n          border: 2px solid;\r\n          border-color: rgb(159, 186, 202) rgb(159, 186, 202) transparent transparent;\r\n          border-radius: 0 6px 0 0;\r\n          transform: translate3d(-1px, 0, 0);\r\n        }\r\n        &:first-child.child:last-child::after {\r\n          left: auto;\r\n          border-radius: 0;\r\n          border-color: transparent rgb(159, 186, 202) transparent transparent;\r\n          transform: translate3d(1px, 0, 0);\r\n        }\r\n  \r\n        &.root-node {\r\n          margin-bottom: 30px;\r\n          // 可以添加其他样式来突出根节点，比如不同的背景色等\r\n        }\r\n  \r\n      }\r\n    }\r\n  }\r\n  .fade-enter-active, .fade-leave-active {\r\n    transition: opacity 0.5s;\r\n  }\r\n  .fade-enter, .fade-leave-to /* .fade-leave-active in <2.1.8 */ {\r\n    opacity: 0;\r\n  }\r\n  \r\n  // 响应式调整\r\n  @media (max-width: 768px) {\r\n    table {\r\n      border-spacing: 10px 0 !important;\r\n    }\r\n    \r\n    .card {\r\n      width: 180px;\r\n    }\r\n  }\r\n  \r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}